<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CIRI Blogs</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{margin:0;font-family:system-ui;background:#000;color:#fff}
header{padding:14px;text-align:center;background:#111;font-size:18px;font-weight:600}

/* CARD LIST */
.card{
  background:#16161d;
  margin:14px;
  padding:14px;
  border-radius:14px;
  cursor:pointer;
}
.card-title{
  font-size:18px;
  font-weight:600;
}

/* FULL BLOG VIEW */
.blog{
  background:#16161d;
  margin:14px;
  padding:14px;
  border-radius:14px;
}
.blog img{max-width:100%;border-radius:12px;margin:10px 0}
.blog iframe{width:100%;height:260px;border-radius:12px;margin:10px 0}
.blog a{color:#6d4cff}
.back{
  margin:14px;
  padding:10px;
  background:#4f46e5;
  text-align:center;
  border-radius:10px;
}
</style>
</head>

<body>

<header>üìñ Blogs</header>
<div id="view"></div>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyDuSRmCqggE2eS6l3nHciy4cNvrwyw-l_I",
  authDomain:"cirithe.firebaseapp.com",
  projectId:"cirithe"
});
const db = firebase.firestore();

let blogsData = [];

/* LOAD BLOGS */
db.collection("blogs").orderBy("time","desc")
.onSnapshot(snapshot=>{
  blogsData = [];
  snapshot.forEach(doc=>{
    blogsData.push({id:doc.id, ...doc.data()});
  });
  showList();
});

/* SHOW LIST */
function showList(){
  view.innerHTML="";
  blogsData.forEach((b,i)=>{
    view.innerHTML+=`
      <div class="card" onclick="openBlog(${i})">
        <div class="card-title">${b.title}</div>
      </div>
    `;
  });
}

/* OPEN FULL BLOG */
function openBlog(i){
  const b = blogsData[i];
  view.innerHTML=`
    <div class="back" onclick="showList()">‚Üê Back</div>
    <div class="blog">
      <h2>${b.title}</h2>
      ${b.content}
    </div>
  `;
}
</script>

</body>
</html>
