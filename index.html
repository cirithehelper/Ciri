<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CIRI ‚Äî Mobile App</title>

<!-- Firebase CDN (COMPAT ONLY) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:Poppins,Arial,sans-serif;
  background:#000;
  color:#fff;
  overflow-x:hidden;
}

/* TOP BAR */
.topbar{
  width:100%;
  height:60px;
  background:rgba(15,15,20,0.55);
  backdrop-filter:blur(14px);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 22px;
  position:fixed;
  top:0;
  z-index:2000;
}
.top-btn{font-size:30px;cursor:pointer}
.title{font-size:26px;font-weight:700}

/* SIDE MENU */
.sidemenu{
  position:fixed;
  top:0;
  left:-260px;
  width:260px;
  height:100vh;
  background:#121219;
  transition:0.3s ease;
  z-index:3000;
  padding-top:70px;
}
.sidemenu.open{left:0}
.sidemenu a{
  display:block;
  padding:18px 22px;
  color:#fff;
  font-size:18px;
  text-decoration:none;
  border-bottom:1px solid rgba(255,255,255,0.1);
}
.closemenu{
  position:absolute;
  top:20px;
  right:20px;
  font-size:26px;
  cursor:pointer;
}

/* CONTENT */
.content{
  padding:90px 20px 100px;
}
.ciri-card{
  background:#16161d;
  margin-bottom:25px;
  padding:18px;
  border-radius:16px;
}
.card-img{
  width:100%;
  border-radius:14px;
  margin-bottom:12px;
}
.card-text{
  font-size:18px;
  line-height:30px;
}

/* BOTTOM NAV */
.bottom-nav{
  position:fixed;
  bottom:0;
  width:100%;
  height:75px;
  background:rgba(20,20,26,0.85);
  backdrop-filter:blur(10px);
  display:flex;
  justify-content:space-around;
  align-items:center;
  z-index:2000;
}
.nav-item{
  text-align:center;
  font-size:12px;
  cursor:pointer;
}

/* NOTIFICATION */
.notify-page{
  position:fixed;
  top:0;
  left:100%;
  width:100%;
  height:100%;
  background:#0f0f15;
  z-index:5000;
  transition:0.35s ease;
  padding-top:60px;
  overflow-y:auto;
}
.notify-page.open{left:0}
.notify-header{
  padding:20px;
  font-size:24px;
  font-weight:700;
}
.notify-item{
  background:#1b1b23;
  margin:14px;
  padding:14px 16px;
  border-radius:14px;
  font-size:17px;
  line-height:24px;
}
.notify-item a{
  color:#6d4cff;
  display:block;
  margin-top:6px;
  font-size:15px;
}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="top-btn" onclick="openMenu()">‚ò∞</div>
  <div class="title">CIRI</div>
  <div class="top-btn" onclick="openNotifications()">üîî</div>
</div>

<!-- SIDE MENU -->
<div id="sideMenu" class="sidemenu">
  <div class="closemenu" onclick="closeMenu()">‚úï</div>
  <div id="sideMenuLinks"></div>
</div>

<!-- CONTENT -->
<div class="content" id="cards">Loading...</div>

<!-- BOTTOM NAV -->
<div class="bottom-nav">
  <div class="nav-item" onclick="goHome()">Home</div>
  <div class="nav-item" onclick="goInfo()">Info</div>
  <div class="nav-item" onclick="goBooks()">Books</div>
  <div class="nav-item" onclick="goReels()">Reels</div>

</div>

<!-- NOTIFICATION PAGE -->
<div id="notifyPage" class="notify-page">
  <div class="notify-header">üîî ‡§∏‡•Ç‡§ö‡§®‡§æ‡§è‡§Å</div>
  <div id="notifyList"></div>
</div>

<script>
/* FIREBASE CONFIG (FINAL) */
firebase.initializeApp({
  apiKey: "AIzaSyDuSRmCqggE2eS6l3nHciy4cNvrwyw-l_I",
  authDomain: "cirithe.firebaseapp.com",
  projectId: "cirithe"
});
const db = firebase.firestore();

/* LOAD CARDS */
db.collection("cards").orderBy("time","desc")
.onSnapshot(snapshot=>{
  cards.innerHTML="";
  if(snapshot.empty){
    cards.innerHTML="<div class='ciri-card'>‡§ï‡•ã‡§à ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§®‡§π‡•Ä‡§Ç</div>";
  }
  snapshot.forEach(doc=>{
    const d = doc.data();
    cards.innerHTML+=`
      <div class="ciri-card">
        <img src="${d.image}" class="card-img">
        <p class="card-text">${d.text}</p>
      </div>
    `;
  });
});

/* LOAD SIDE MENU (ADMIN CONTROLLED) */
db.collection("sideMenu").onSnapshot(snapshot=>{
  sideMenuLinks.innerHTML="";
  snapshot.forEach(doc=>{
    const d = doc.data();
    sideMenuLinks.innerHTML+=`
      <a href="${d.link}" target="_blank">${d.name}</a>
    `;
  });
});

/* NOTIFICATIONS WITH LINK */
function openNotifications(){
  notifyPage.classList.add("open");
  notifyList.innerHTML="Loading...";
  db.collection("notifications").orderBy("time","desc")
  .onSnapshot(snapshot=>{
    notifyList.innerHTML="";
    if(snapshot.empty){
      notifyList.innerHTML="<div class='notify-item'>‡§ï‡•ã‡§à ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§®‡§π‡•Ä‡§Ç</div>";
    }
    snapshot.forEach(doc=>{
      const d = doc.data();
      notifyList.innerHTML+=`
        <div class="notify-item">
          <div>${d.text}</div>
          ${d.link ? `<a href="${d.link}" target="_blank">Open / More ‚Üí</a>` : ""}
        </div>
      `;
    });
  });
}

/* MENU */
function openMenu(){sideMenu.classList.add("open")}
function closeMenu(){sideMenu.classList.remove("open")}

/* NAVIGATION */
function goHome(){location.href="index.html"}
function goInfo(){
  location.href = "Information.html";
}
function goBooks(){location.href="books.html"}
function goReels(){location.href="reels.html"}


</script>

</body>
</html>
